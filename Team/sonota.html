<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Firebase 掲示板</title>
  <style>
    body { font-family: sans-serif; background: #f5f5f5;}
    #bbs { width: 400px; margin: 40px auto; background: #fff; padding: 20px; border-radius: 8px;}
    #messages { height: 250px; overflow-y: auto; border: 1px solid #ccc; padding: 10px; margin-bottom: 10px;}
    .message { margin-bottom: 10px; }
    .name { font-weight: bold; color: #0077aa;}
    .text { margin-left: 5px;}
  </style>
</head>
<body>
  <div id="bbs">
    <h2>雑談掲示板</h2>
    <div id="messages"></div>
    <form id="form">
      <input type="text" id="name" placeholder="名前" required style="width:80px;">
      <input type="text" id="text" placeholder="メッセージを入力" required style="width:220px;">
      <button type="submit">投稿</button>
    </form>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>

  <script>
    // 🔁 あなたの Firebase 設定に置き換えてください
    const firebaseConfig = {
      apiKey: "AIzaSyBTQ303r008m0A-HlHg1Il6lIzdElBAjTU",
      authDomain: "inilad.firebaseapp.com",
      databaseURL: "https://inilad-default-rtdb.firebaseio.com",
      projectId: "inilad",
      storageBucket: "inilad.firebasestorage.app",
      messagingSenderId: "979808509972",
      appId: "1:979808509972:web:64a60bcef39b86863b8701"
    };

    // 初期化
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const form = document.getElementById('form');
    const messages = document.getElementById('messages');
    const nameInput = document.getElementById('name');
    const textInput = document.getElementById('text');

    // 投稿
    form.addEventListener('submit', function(e) {
      e.preventDefault();
      const name = nameInput.value.trim();
      const text = textInput.value.trim();
      if (name && text) {
        db.ref('messages').push({ name, text });
        textInput.value = '';
      }
    });

    // メッセージ表示
    db.ref('messages').on('value', snapshot => {
      const data = snapshot.val();
      messages.innerHTML = '';
      for (let key in data) {
        const m = data[key];
        const msgDiv = document.createElement('div');
        msgDiv.className = 'message';
        msgDiv.innerHTML = `<span class="name">${m.name}</span>: <span class="text">${m.text}</span>`;
        messages.appendChild(msgDiv);
      }
      messages.scrollTop = messages.scrollHeight;
    });
  </script>
</body>
</html>
